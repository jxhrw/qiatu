<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>积分动态</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no"/>
    <meta http-equiv="cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <script src="http://7xio74.com1.z0.glb.clouddn.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>

</head>

<body>

<div id="content" style="width:188px;height:300px;border:1px solid #22b4f6;text-align:center;">
    <p>昵称：richer</p>
    <p>专业：前端 + 后端</p>
    <p>语言：html、php、mysql</p>
    <p>脚本：javascript</p>
    <p><input type="text" class="tx" placeholder="微信公众号开发"></p>
    <p><input type="button" class="bt" value="网站微站开发"></p>
</div>

<button id="cavBtn">生成canvas</button>
<button id="pngBtn">生成png</button>
<p>canvas预览区</p>
<div id="img-canvas" style="width:190px;height:302px;text-align:center;line-height:302px"></div>
<p>图片预览区</p>
<div id="img-png" style="width:190px;height:302px;text-align:center;line-height:302px"></div>

<script>
    // 获取按钮id
    var btnSave = document.getElementById("cavBtn");
    var btnPng = document.getElementById("pngBtn");
    // 获取内容id
    var content = document.getElementById("content");
    // 进行canvas生成
    btnSave.onclick = function(){
        html2canvas(content, {
            onrendered: function(canvas) {
                //添加属性
                canvas.setAttribute('id','thecanvas');
                //读取属性值
                // var value= canvas.getAttribute('id');
                document.getElementById('img-canvas').innerHTML = '';
                document.getElementById('img-canvas').appendChild(canvas);
            }
        });
    };

    btnPng.onclick = function(){
        var canvas = document.getElementById("thecanvas");
        var imgData =canvas.toDataURL();
        var newImg =new Image();
        newImg.src = imgData;
        $("#img-png").html(newImg);
    }


</script>

</body>

</html>